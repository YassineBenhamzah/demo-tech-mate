import{c as Ne,r as l,u as Je,j as s,F as ge,h as Qe,b as be,C as K,B as z,I as Y,S as re,a as et,X as tt}from"./index-BGJdic0U.js";import{D as $,C as at}from"./download-B6k-a_dC.js";import{C as de,c as Ce,a0 as ue,aU as rt,aV as nt,F as G,aW as it,aX as st,aY as lt,aZ as ot,a_ as ct,a$ as dt,b0 as ut,i as ne,aE as Be,b1 as vt,b2 as ye,b3 as ft,b4 as mt,ab as ae,a4 as ie,aC as se,aj as pt,a1 as ht,b as _,B as xt,b5 as gt,t as q,ae as bt,ag as R,ac as W,ah as F,ad as V,al as De,am as Le,b6 as Me,b7 as yt,b8 as jt,ai as je,b9 as Pt,ba as Pe,ar as wt,L as J,an as Ot,D as ve,ao as ze,R as At,ap as St,aq as kt,Z as fe,A as Te,I as It,au as Et,as as Nt,E as Ct,H as _e,m as Ke,aw as Bt,bb as Dt,bc as Lt,bd as we,T as $e,W as Re,X as Fe,Y as We,a5 as Mt,J as zt,K as Tt,N as T,a2 as _t,aA as Kt,s as $t,U as Rt,az as Ft,O as Oe,aM as Wt,aL as Vt,aO as Ut,aN as qt,aP as Gt,aQ as Ht,aR as Xt,aS as Yt,aT as Zt}from"./CartesianChart-DE4lJp-P.js";import{S as Jt}from"./search-BepPDWoY.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],ea=Ne("chart-no-axes-column",Qt);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],aa=Ne("trending-down",ta);function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Q.apply(null,arguments)}function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function ra(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ae(Object(a),!0).forEach(function(r){na(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function na(e,t,a){return(t=ia(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ia(e){var t=sa(e,"string");return typeof t=="symbol"?t:t+""}function sa(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D=32,la={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function oa(e){var{data:t,iconType:a,inactiveColor:r}=e,n=D/2,i=D/6,o=D/3,v=t.inactive?r:t.color,f=a??t.type;if(f==="none")return null;if(f==="plainline"){var d;return l.createElement("line",{strokeWidth:4,fill:"none",stroke:v,strokeDasharray:(d=t.payload)===null||d===void 0?void 0:d.strokeDasharray,x1:0,y1:n,x2:D,y2:n,className:"recharts-legend-icon"})}if(f==="line")return l.createElement("path",{strokeWidth:4,fill:"none",stroke:v,d:"M0,".concat(n,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(n,`
            H`).concat(D,"M").concat(2*o,",").concat(n,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(n),className:"recharts-legend-icon"});if(f==="rect")return l.createElement("path",{stroke:"none",fill:v,d:"M0,".concat(D/8,"h").concat(D,"v").concat(D*3/4,"h").concat(-D,"z"),className:"recharts-legend-icon"});if(l.isValidElement(t.legendIcon)){var c=ra({},t);return delete c.legendIcon,l.cloneElement(t.legendIcon,c)}return l.createElement(nt,{fill:v,cx:n,cy:n,size:D,sizeType:"diameter",type:f})}function ca(e){var{payload:t,iconSize:a,layout:r,formatter:n,inactiveColor:i,iconType:o}=e,v={x:0,y:0,width:D,height:D},f={display:r==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((c,p)=>{var h=c.formatter||n,y=Ce({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:c.inactive});if(c.type==="none")return null;var x=c.inactive?i:c.color,b=h?h(c.value,c,p):c.value;return l.createElement("li",Q({className:y,style:f,key:"legend-item-".concat(p)},ue(e,c,p)),l.createElement(rt,{width:a,height:a,viewBox:v,style:d,"aria-label":"".concat(b," legend icon")},l.createElement(oa,{data:c,iconType:o,inactiveColor:i})),l.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},b))})}var da=e=>{var t=de(e,la),{payload:a,layout:r,align:n}=t;if(!a||!a.length)return null;var i={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return l.createElement("ul",{className:"recharts-default-legend",style:i},l.createElement(ca,Q({},t,{payload:a})))};function ua(){return G(it)}var va=["contextPayload"];function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},le.apply(null,arguments)}function Se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Se(Object(a),!0).forEach(function(r){fa(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Se(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function fa(e,t,a){return(t=ma(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ma(e){var t=pa(e,"string");return typeof t=="symbol"?t:t+""}function pa(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ha(e,t){if(e==null)return{};var a,r,n=xa(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function xa(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function ga(e){return e.value}function ba(e){var{contextPayload:t}=e,a=ha(e,va),r=ft(t,e.payloadUniqBy,ga),n=U(U({},a),{},{payload:r});return l.isValidElement(e.content)?l.cloneElement(e.content,n):typeof e.content=="function"?l.createElement(e.content,n):l.createElement(da,n)}function ya(e,t,a,r,n,i){var{layout:o,align:v,verticalAlign:f}=t,d,c;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(v==="center"&&o==="vertical"?d={left:((r||0)-i.width)/2}:d=v==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(f==="middle"?c={top:((n||0)-i.height)/2}:c=f==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),U(U({},d),c)}function ja(e){var t=Be();return l.useEffect(()=>{t(vt(e))},[t,e]),null}function Pa(e){var t=Be();return l.useEffect(()=>(t(ye(e)),()=>{t(ye({width:0,height:0}))}),[t,e]),null}function wa(e,t,a,r){return e==="vertical"&&ne(t)?{height:t}:e==="horizontal"?{width:a||r}:null}var Oa={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function Ve(e){var t=de(e,Oa),a=ua(),r=st(),n=lt(),{width:i,height:o,wrapperStyle:v,portal:f}=t,[d,c]=ot([a]),p=ct(),h=dt();if(p==null||h==null)return null;var y=p-((n==null?void 0:n.left)||0)-((n==null?void 0:n.right)||0),x=wa(t.layout,o,i,y),b=f?v:U(U({position:"absolute",width:(x==null?void 0:x.width)||i||"auto",height:(x==null?void 0:x.height)||o||"auto"},ya(v,t,n,p,h,d)),v),w=f??r;if(w==null||a==null)return null;var m=l.createElement("div",{className:"recharts-legend-wrapper",style:b,ref:c},l.createElement(ja,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!f&&l.createElement(Pa,{width:d.width,height:d.height}),l.createElement(ba,le({},t,x,{margin:n,chartWidth:p,chartHeight:h,contextPayload:a})));return ut.createPortal(m,w)}Ve.displayName="Legend";var ke=(e,t,a)=>{var r=a??e;if(!ae(r))return ie(r,t,0)},Aa=(e,t,a)=>{var r={},n=e.filter(mt),i=e.filter(d=>d.stackId==null),o=n.reduce((d,c)=>(d[c.stackId]||(d[c.stackId]=[]),d[c.stackId].push(c),d),r),v=Object.entries(o).map(d=>{var[c,p]=d,h=p.map(x=>x.dataKey),y=ke(t,a,p[0].barSize);return{stackId:c,dataKeys:h,barSize:y}}),f=i.map(d=>{var c=[d.dataKey].filter(h=>h!=null),p=ke(t,a,d.barSize);return{stackId:void 0,dataKeys:c,barSize:p}});return[...v,...f]};function Ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ie(Object(a),!0).forEach(function(r){Sa(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ie(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Sa(e,t,a){return(t=ka(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ka(e){var t=Ia(e,"string");return typeof t=="symbol"?t:t+""}function Ia(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ea(e,t,a,r,n){var i=r.length;if(!(i<1)){var o=ie(e,a,0,!0),v,f=[];if(se(r[0].barSize)){var d=!1,c=a/i,p=r.reduce((m,g)=>m+(g.barSize||0),0);p+=(i-1)*o,p>=a&&(p-=(i-1)*o,o=0),p>=a&&c>0&&(d=!0,c*=.9,p=i*c);var h=(a-p)/2>>0,y={offset:h-o,size:0};v=r.reduce((m,g)=>{var I,O={stackId:g.stackId,dataKeys:g.dataKeys,position:{offset:y.offset+y.size+o,size:d?c:(I=g.barSize)!==null&&I!==void 0?I:0}},A=[...m,O];return y=A[A.length-1].position,A},f)}else{var x=ie(t,a,0,!0);a-2*x-(i-1)*o<=0&&(o=0);var b=(a-2*x-(i-1)*o)/i;b>1&&(b>>=0);var w=se(n)?Math.min(b,n):b;v=r.reduce((m,g,I)=>[...m,{stackId:g.stackId,dataKeys:g.dataKeys,position:{offset:x+(b+o)*I+(b-w)/2,size:w}}],f)}return v}}var Na=(e,t,a,r,n,i,o)=>{var v=ae(o)?t:o,f=Ea(a,r,n!==i?n:i,e,v);return n!==i&&f!=null&&(f=f.map(d=>Z(Z({},d),{},{position:Z(Z({},d.position),{},{offset:d.position.offset-n/2})}))),f},Ca=(e,t)=>{var a=pt(t);if(!(!e||a==null||t==null)){var{stackId:r}=t;if(r!=null){var n=e[r];if(n){var{stackedData:i}=n;if(i)return i.find(o=>o.key===a)}}}};function Ba(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&se(e.zIndex)?e.zIndex:t}var Da=["children"];function La(e,t){if(e==null)return{};var a,r,n=Ma(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Ma(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var za={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Ta=l.createContext(za);function _a(e){var{children:t}=e,a=La(e,Da);return l.createElement(Ta.Provider,{value:a},t)}var Ka="Invariant failed";function $a(e,t){throw new Error(Ka)}function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},oe.apply(null,arguments)}function ee(e){return l.createElement(ht,oe({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var Ra=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,n)=>{if(ne(t))return t;var i=ne(r)||ae(r);return i?t(r,n):(i||$a(),a)}},Fa=(e,t,a)=>a,Wa=(e,t)=>t,H=_([Le,Wa],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),Va=_([H],e=>e==null?void 0:e.maxBarSize),Ua=(e,t,a,r)=>r,qa=_([q,Le,R,F,Fa],(e,t,a,r,n)=>t.filter(i=>e==="horizontal"?i.xAxisId===a:i.yAxisId===r).filter(i=>i.isPanorama===n).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),Ga=(e,t,a)=>{var r=q(e),n=R(e,t),i=F(e,t);if(!(n==null||i==null))return r==="horizontal"?je(e,"yAxis",i,a):je(e,"xAxis",n,a)},Ha=(e,t)=>{var a=q(e),r=R(e,t),n=F(e,t);if(!(r==null||n==null))return a==="horizontal"?Pe(e,"xAxis",r):Pe(e,"yAxis",n)},Xa=_([qa,Pt,Ha],Aa),Ya=(e,t,a)=>{var r,n,i=H(e,t);if(i!=null){var o=R(e,t),v=F(e,t);if(!(o==null||v==null)){var f=q(e),d=Me(e),{maxBarSize:c}=i,p=ae(c)?d:c,h,y;return f==="horizontal"?(h=W(e,"xAxis",o,a),y=V(e,"xAxis",o,a)):(h=W(e,"yAxis",v,a),y=V(e,"yAxis",v,a)),(r=(n=De(h,y,!0))!==null&&n!==void 0?n:p)!==null&&r!==void 0?r:0}}},Ue=(e,t,a)=>{var r=q(e),n=R(e,t),i=F(e,t);if(!(n==null||i==null)){var o,v;return r==="horizontal"?(o=W(e,"xAxis",n,a),v=V(e,"xAxis",n,a)):(o=W(e,"yAxis",i,a),v=V(e,"yAxis",i,a)),De(o,v)}},Za=_([Xa,Me,yt,jt,Ya,Ue,Va],Na),Ja=(e,t,a)=>{var r=R(e,t);if(r!=null)return W(e,"xAxis",r,a)},Qa=(e,t,a)=>{var r=F(e,t);if(r!=null)return W(e,"yAxis",r,a)},er=(e,t,a)=>{var r=R(e,t);if(r!=null)return V(e,"xAxis",r,a)},tr=(e,t,a)=>{var r=F(e,t);if(r!=null)return V(e,"yAxis",r,a)},ar=_([Za,H],(e,t)=>{if(!(e==null||t==null)){var a=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(a!=null)return a.position}}),rr=_([Ga,H],Ca),nr=_([xt,gt,Ja,Qa,er,tr,ar,q,bt,Ue,rr,H,Ua],(e,t,a,r,n,i,o,v,f,d,c,p,h)=>{var{chartData:y,dataStartIndex:x,dataEndIndex:b}=f;if(!(p==null||o==null||t==null||v!=="horizontal"&&v!=="vertical"||a==null||r==null||n==null||i==null||d==null)){var{data:w}=p,m;if(w!=null&&w.length>0?m=w:m=y==null?void 0:y.slice(x,b+1),m!=null)return Dr({layout:v,barSettings:p,pos:o,parentViewBox:t,bandSize:d,xAxis:a,yAxis:r,xAxisTicks:n,yAxisTicks:i,stackedData:c,displayedData:m,offset:e,cells:h,dataStartIndex:x})}}),ir=["index"];function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ce.apply(null,arguments)}function sr(e,t){if(e==null)return{};var a,r,n=lr(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function lr(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var qe=l.createContext(void 0),or=e=>{var t=l.useContext(qe);if(t!=null)return t.stackId;if(e!=null)return wt(e)},cr=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),dr=e=>{var t=l.useContext(qe);if(t!=null){var{stackId:a}=t;return"url(#".concat(cr(a,e),")")}},ur=e=>{var{index:t}=e,a=sr(e,ir),r=dr(t);return l.createElement(J,ce({className:"recharts-bar-stack-layer",clipPath:r},a))},vr=["onMouseEnter","onMouseLeave","onClick"],fr=["value","background","tooltipPosition"],mr=["id"],pr=["onMouseEnter","onClick","onMouseLeave"];function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},M.apply(null,arguments)}function Ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ee(Object(a),!0).forEach(function(r){hr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ee(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function hr(e,t,a){return(t=xr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function xr(e){var t=gr(e,"string");return typeof t=="symbol"?t:t+""}function gr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function te(e,t){if(e==null)return{};var a,r,n=br(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function br(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var yr=e=>{var{dataKey:t,name:a,fill:r,legendType:n,hide:i}=e;return[{inactive:i,dataKey:t,type:n,color:r,value:Te(a,t),payload:e}]},jr=l.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:r,fill:n,name:i,hide:o,unit:v,tooltipType:f,id:d}=e,c={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:r,fill:n,dataKey:t,nameKey:void 0,name:Te(i,t),hide:o,type:f,color:n,unit:v,graphicalItemId:d}};return l.createElement(It,{tooltipEntrySettings:c})});function Pr(e){var t=G($e),{data:a,dataKey:r,background:n,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:v,onClick:f}=i,d=te(i,vr),c=Re(o,r,i.id),p=Fe(v),h=We(f,r,i.id);if(!n||a==null)return null;var y=Mt(n);return l.createElement(fe,{zIndex:Ba(n,ve.barBackground)},a.map((x,b)=>{var{value:w,background:m,tooltipPosition:g}=x,I=te(x,fr);if(!m)return null;var O=c(x,b),A=p(x,b),u=h(x,b),P=N(N(N(N(N({option:n,isActive:String(b)===t},I),{},{fill:"#eee"},m),y),ue(d,x,b)),{},{onMouseEnter:O,onMouseLeave:A,onClick:u,dataKey:r,index:b,className:"recharts-bar-background-rectangle"});return l.createElement(ee,M({key:"background-bar-".concat(b)},P))}))}function wr(e){var{showLabels:t,children:a,rects:r}=e,n=r==null?void 0:r.map(i=>{var o={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return N(N({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return l.createElement(Kt,{value:t?n:void 0},a)}function Or(e){var{shape:t,activeBar:a,baseProps:r,entry:n,index:i,dataKey:o}=e,v=G($e),f=G(Rt),d=a&&String(i)===v&&(f==null||o===f),c=d?a:t;return d?l.createElement(fe,{zIndex:ve.activeBar},l.createElement(ee,M({},r,{name:String(r.name)},n,{isActive:d,option:c,index:i,dataKey:o}))):l.createElement(ee,M({},r,{name:String(r.name)},n,{isActive:d,option:c,index:i,dataKey:o}))}function Ar(e){var{shape:t,baseProps:a,entry:r,index:n,dataKey:i}=e;return l.createElement(ee,M({},a,{name:String(a.name)},r,{isActive:!1,option:t,index:n,dataKey:i}))}function Sr(e){var t,{data:a,props:r}=e,n=(t=$t(r))!==null&&t!==void 0?t:{},{id:i}=n,o=te(n,mr),{shape:v,dataKey:f,activeBar:d}=r,{onMouseEnter:c,onClick:p,onMouseLeave:h}=r,y=te(r,pr),x=Re(c,f,i),b=Fe(h),w=We(p,f,i);return a?l.createElement(l.Fragment,null,a.map((m,g)=>l.createElement(ur,M({index:g,key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(g),className:"recharts-bar-rectangle"},ue(y,m,g),{onMouseEnter:x(m,g),onMouseLeave:b(m,g),onClick:w(m,g)}),d?l.createElement(Or,{shape:v,activeBar:d,baseProps:o,entry:m,index:g,dataKey:f}):l.createElement(Ar,{shape:v,baseProps:o,entry:m,index:g,dataKey:f})))):null}function kr(e){var{props:t,previousRectanglesRef:a}=e,{data:r,layout:n,isAnimationActive:i,animationBegin:o,animationDuration:v,animationEasing:f,onAnimationEnd:d,onAnimationStart:c}=t,p=a.current,h=zt(t,"recharts-bar-"),[y,x]=l.useState(!1),b=!y,w=l.useCallback(()=>{typeof d=="function"&&d(),x(!1)},[d]),m=l.useCallback(()=>{typeof c=="function"&&c(),x(!0)},[c]);return l.createElement(wr,{showLabels:b,rects:r},l.createElement(Tt,{animationId:h,begin:o,duration:v,isActive:i,easing:f,onAnimationEnd:w,onAnimationStart:m,key:h},g=>{var I=g===1?r:r==null?void 0:r.map((O,A)=>{var u=p&&p[A];if(u)return N(N({},O),{},{x:T(u.x,O.x,g),y:T(u.y,O.y,g),width:T(u.width,O.width,g),height:T(u.height,O.height,g)});if(n==="horizontal"){var P=T(0,O.height,g),E=T(O.stackedBarStart,O.y,g);return N(N({},O),{},{y:E,height:P})}var k=T(0,O.width,g),S=T(O.stackedBarStart,O.x,g);return N(N({},O),{},{width:k,x:S})});return g>0&&(a.current=I??null),I==null?null:l.createElement(J,null,l.createElement(Sr,{props:t,data:I}))}),l.createElement(_t,{label:t.label}),t.children)}function Ir(e){var t=l.useRef(null);return l.createElement(kr,{previousRectanglesRef:t,props:e})}var Ge=0,Er=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:Ke(e,t)}};class Nr extends l.PureComponent{render(){var{hide:t,data:a,dataKey:r,className:n,xAxisId:i,yAxisId:o,needClip:v,background:f,id:d}=this.props;if(t||a==null)return null;var c=Ce("recharts-bar",n),p=d;return l.createElement(J,{className:c,id:d},v&&l.createElement("defs",null,l.createElement(Bt,{clipPathId:p,xAxisId:i,yAxisId:o})),l.createElement(J,{className:"recharts-bar-rectangles",clipPath:v?"url(#clipPath-".concat(p,")"):void 0},l.createElement(Pr,{data:a,dataKey:r,background:f,allOtherBarProps:this.props}),l.createElement(Ir,this.props)))}}var Cr={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Ge,xAxisId:0,yAxisId:0,zIndex:ve.bar};function Br(e){var{xAxisId:t,yAxisId:a,hide:r,legendType:n,minPointSize:i,activeBar:o,animationBegin:v,animationDuration:f,animationEasing:d,isAnimationActive:c}=e,{needClip:p}=Et(t,a),h=Nt(),y=ze(),x=Ct(e.children,_e),b=G(g=>nr(g,e.id,y,x));if(h!=="vertical"&&h!=="horizontal")return null;var w,m=b==null?void 0:b[0];return m==null||m.height==null||m.width==null?w=0:w=h==="vertical"?m.height/2:m.width/2,l.createElement(_a,{xAxisId:t,yAxisId:a,data:b,dataPointFormatter:Er,errorBarOffset:w},l.createElement(Nr,M({},e,{layout:h,needClip:p,data:b,xAxisId:t,yAxisId:a,hide:r,legendType:n,minPointSize:i,activeBar:o,animationBegin:v,animationDuration:f,animationEasing:d,isAnimationActive:c})))}function Dr(e){var{layout:t,barSettings:{dataKey:a,minPointSize:r},pos:n,bandSize:i,xAxis:o,yAxis:v,xAxisTicks:f,yAxisTicks:d,stackedData:c,displayedData:p,offset:h,cells:y,parentViewBox:x,dataStartIndex:b}=e,w=t==="horizontal"?v:o,m=c?w.scale.domain():null,g=Dt({numericAxis:w}),I=w.scale(g);return p.map((O,A)=>{var u,P,E,k,S,L;if(c){var C=c[A+b];if(C==null)return null;u=Lt(C,m)}else u=Ke(O,a),Array.isArray(u)||(u=[g,u]);var j=Ra(r,Ge)(u[1],A);if(t==="horizontal"){var B,[me,X]=[v.scale(u[0]),v.scale(u[1])];P=we({axis:o,ticks:f,bandSize:i,offset:n.offset,entry:O,index:A}),E=(B=X??me)!==null&&B!==void 0?B:void 0,k=n.size;var pe=me-X;if(S=Ft(pe)?0:pe,L={x:P,y:h.top,width:k,height:h.height},Math.abs(j)>0&&Math.abs(S)<Math.abs(j)){var he=Oe(S||j)*(Math.abs(j)-Math.abs(S));E-=he,S+=he}}else{var[xe,Xe]=[o.scale(u[0]),o.scale(u[1])];if(P=xe,E=we({axis:v,ticks:d,bandSize:i,offset:n.offset,entry:O,index:A}),k=Xe-xe,S=n.size,L={x:h.left,y:E,width:h.width,height:S},Math.abs(j)>0&&Math.abs(k)<Math.abs(j)){var Ye=Oe(k||j)*(Math.abs(j)-Math.abs(k));k+=Ye}}if(P==null||E==null||k==null||S==null)return null;var Ze=N(N({},O),{},{stackedBarStart:I,x:P,y:E,width:k,height:S,value:c?u:u[1],payload:O,background:L,tooltipPosition:{x:P+k/2,y:E+S/2},parentViewBox:x},y&&y[A]&&y[A].props);return Ze}).filter(Boolean)}function Lr(e){var t=de(e,Cr),a=or(t.stackId),r=ze();return l.createElement(At,{id:t.id,type:"bar"},n=>l.createElement(l.Fragment,null,l.createElement(St,{legendPayload:yr(t)}),l.createElement(jr,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:n}),l.createElement(kt,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:a,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),l.createElement(fe,{zIndex:t.zIndex},l.createElement(Br,M({},t,{id:n})))))}var He=l.memo(Lr,Ot);He.displayName="Bar";var Mr=["axis","item"],zr=l.forwardRef((e,t)=>l.createElement(Wt,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Mr,tooltipPayloadSearcher:Vt,categoricalChartProps:e,ref:t}));const Rr=()=>{const{logs:e,transactions:t,quotes:a,deliveries:r}=Je(),[n,i]=l.useState("reports"),[o,v]=l.useState(""),[f,d]=l.useState("All"),[c,p]=l.useState(""),[h,y]=l.useState(()=>{const u=new Date;return u.setMonth(u.getMonth()-1),u.toISOString().split("T")[0]}),[x,b]=l.useState(()=>new Date().toISOString().split("T")[0]),w=["All",...Array.from(new Set(e.map(u=>u.module))).sort()],m=e.filter(u=>{const P=o.toLowerCase(),E=u.user.toLowerCase().includes(P)||u.action.toLowerCase().includes(P)||(u.details||"").toLowerCase().includes(P)||u.module.toLowerCase().includes(P),k=f==="All"||u.module===f;let S=!0;if(c){const[L,C,j]=c.split("-"),B=`${j}/${C}/${L}`;S=u.timestamp.startsWith(B)}return E&&k&&S}),g=()=>{const u=["Date","Utilisateur","Module","Action","Détails"],P=m.map(C=>[`"${C.timestamp}"`,`"${C.user}"`,`"${C.module}"`,`"${C.action}"`,`"${(C.details||"").replace(/"/g,'""')}"`]),E=[u.join(","),...P.map(C=>C.join(","))].join(`
`),k=new Blob([E],{type:"text/csv;charset=utf-8;"}),S=URL.createObjectURL(k),L=document.createElement("a");L.href=S,L.setAttribute("download","audit_export.csv"),L.click()},I=()=>{v(""),d("All"),p("")},A=(()=>{const u=t.filter(j=>{const B=j.date.split(" ")[0];return B>=h&&B<=x}),P=u.filter(j=>j.type==="IN").reduce((j,B)=>j+B.amount,0),E=u.filter(j=>j.type==="OUT").reduce((j,B)=>j+B.amount,0),k=P-E,S=a.filter(j=>j.date>=h&&j.date<=x),L=r.filter(j=>j.date>=h&&j.date<=x),C=[{name:"Entrées",amount:P},{name:"Sorties",amount:E},{name:"Bénéfice",amount:k}];return{totalIn:P,totalOut:E,netResult:k,quotesCount:S.length,quotesTotal:S.reduce((j,B)=>j+B.total,0),deliveriesCount:L.length,transactionsCount:u.length,chartData:C}})();return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Rapports & Historiques"}),s.jsx("p",{className:"text-slate-500",children:"Analysez vos performances et surveillez la traçabilité"})]})}),s.jsx("div",{className:"border-b border-slate-200",children:s.jsxs("nav",{className:"-mb-px flex gap-6 overflow-x-auto",children:[s.jsxs("button",{onClick:()=>i("reports"),className:`pb-4 px-2 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 whitespace-nowrap ${n==="reports"?"border-brand-600 text-brand-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[s.jsx(ge,{size:18}),"Documents"]}),s.jsxs("button",{onClick:()=>i("analysis"),className:`pb-4 px-2 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 whitespace-nowrap ${n==="analysis"?"border-brand-600 text-brand-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[s.jsx(ea,{size:18}),"Analyse Périodique"]}),s.jsxs("button",{onClick:()=>i("audit"),className:`pb-4 px-2 text-sm font-medium border-b-2 transition-colors flex items-center gap-2 whitespace-nowrap ${n==="audit"?"border-brand-600 text-brand-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[s.jsx(Qe,{size:18}),"Journal d'Audit",s.jsx(be,{color:"gray",children:m.length})]})]})}),n==="reports"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs(K,{className:"p-6",children:[s.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-2",children:"Bilan Financier Mensuel"}),s.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Résumé des ventes, achats, charges et bénéfices."}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx(z,{variant:"outline",className:"w-full justify-between",icon:$,children:"Octobre 2023.pdf"}),s.jsx(z,{variant:"outline",className:"w-full justify-between",icon:$,children:"Septembre 2023.pdf"})]})]}),s.jsxs(K,{className:"p-6",children:[s.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-2",children:"État de Stock"}),s.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Inventaire valorisé et mouvements de stock."}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx(z,{variant:"outline",className:"w-full justify-between",icon:$,children:"Inventaire Global.xlsx"}),s.jsx(z,{variant:"outline",className:"w-full justify-between",icon:$,children:"Mouvements (7j).pdf"})]})]}),s.jsxs(K,{className:"p-6",children:[s.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-2",children:"Journal TVA"}),s.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Export des factures pour la déclaration."}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx(z,{variant:"outline",className:"w-full justify-between",icon:$,children:"Ventes T3 2023.csv"}),s.jsx(z,{variant:"outline",className:"w-full justify-between",icon:$,children:"Ventes T2 2023.csv"})]})]})]}),n==="analysis"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx(K,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-end md:items-center gap-4",children:[s.jsxs("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 gap-4 w-full",children:[s.jsx(Y,{label:"Date de début",type:"date",value:h,onChange:u=>y(u.target.value)}),s.jsx(Y,{label:"Date de fin",type:"date",value:x,onChange:u=>b(u.target.value)})]}),s.jsxs("div",{className:"text-sm text-slate-500 hidden md:block",children:["Période de ",Math.ceil((new Date(x).getTime()-new Date(h).getTime())/(1e3*60*60*24))," jours"]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(re,{title:"Chiffre d'Affaires",value:`${A.totalIn.toLocaleString()} MAD`,icon:Ut,color:"emerald"}),s.jsx(re,{title:"Dépenses Totales",value:`${A.totalOut.toLocaleString()} MAD`,icon:aa,color:"rose"}),s.jsx(re,{title:"Résultat Net",value:`${A.netResult.toLocaleString()} MAD`,icon:qt,color:"blue"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs(K,{className:"lg:col-span-2 p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-6",children:"Comparatif Financier"}),s.jsx("div",{className:"h-72 w-full",children:s.jsx(Gt,{width:"100%",height:"100%",children:s.jsxs(zr,{data:A.chartData,children:[s.jsx(Ht,{strokeDasharray:"3 3",vertical:!1,stroke:"#e2e8f0"}),s.jsx(Xt,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#64748b"}}),s.jsx(Yt,{axisLine:!1,tickLine:!1,tick:{fill:"#64748b"}}),s.jsx(Zt,{cursor:{fill:"#f1f5f9"},contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),s.jsx(Ve,{}),s.jsx(He,{dataKey:"amount",name:"Montant (MAD)",radius:[4,4,0,0],children:A.chartData.map((u,P)=>s.jsx(_e,{fill:P===0?"#10b981":P===1?"#f43f5e":"#3b82f6"},`cell-${P}`))})]})})})]}),s.jsxs(K,{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Volume Opérationnel"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500",children:"Nouveaux Devis"}),s.jsx("p",{className:"font-bold text-slate-900",children:A.quotesCount})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-slate-500",children:"Montant Total"}),s.jsxs("p",{className:"font-bold text-brand-600",children:[A.quotesTotal.toLocaleString()," MAD"]})]})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500",children:"Expéditions (BL)"}),s.jsx("p",{className:"font-bold text-slate-900",children:A.deliveriesCount})]}),s.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded",children:s.jsx(at,{size:20})})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500",children:"Transactions"}),s.jsx("p",{className:"font-bold text-slate-900",children:A.transactionsCount})]}),s.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded",children:s.jsx(ge,{size:20})})]})]})]})]})]}),n==="audit"&&s.jsxs(K,{className:"p-4",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6 p-4 bg-slate-50 rounded-lg border border-slate-100",children:[s.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx("div",{className:"col-span-1 md:col-span-2",children:s.jsx(Y,{placeholder:"Rechercher (Utilisateur, Action)...",icon:Jt,value:o,onChange:u=>v(u.target.value)})}),s.jsx(et,{value:f,onChange:u=>d(u.target.value),children:w.map(u=>s.jsx("option",{value:u,children:u==="All"?"Tous les modules":u},u))}),s.jsx(Y,{type:"date",value:c,onChange:u=>p(u.target.value),className:"w-full"})]}),s.jsxs("div",{className:"flex gap-2 items-start",children:[s.jsx(z,{variant:"outline",onClick:I,title:"Réinitialiser",children:s.jsx(tt,{size:18})}),s.jsx(z,{variant:"primary",icon:$,onClick:g,children:"Exporter"})]})]}),s.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200",children:s.jsxs("table",{className:"w-full text-sm text-left",children:[s.jsx("thead",{className:"bg-slate-50 text-slate-700 font-semibold",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-4 px-4 whitespace-nowrap",children:"Horodatage"}),s.jsx("th",{className:"py-4 px-4",children:"Utilisateur"}),s.jsx("th",{className:"py-4 px-4",children:"Module"}),s.jsx("th",{className:"py-4 px-4",children:"Action"}),s.jsx("th",{className:"py-4 px-4 w-1/3",children:"Détails"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100 bg-white",children:m.length>0?m.map(u=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsx("td",{className:"py-4 px-4 text-slate-500 whitespace-nowrap font-mono text-xs",children:u.timestamp}),s.jsx("td",{className:"py-4 px-4 font-medium text-slate-900",children:u.user}),s.jsx("td",{className:"py-4 px-4",children:s.jsx(be,{color:"gray",children:u.module})}),s.jsx("td",{className:"py-4 px-4 font-medium text-brand-700",children:u.action}),s.jsx("td",{className:"py-4 px-4 text-slate-600 break-words",children:u.details||"-"})]},u.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"py-8 text-center text-slate-500",children:"Aucun historique trouvé."})})})]})})]})]})};export{Rr as Reports};
